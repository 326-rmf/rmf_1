<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link type="text/css" rel="stylesheet" href="css/reset.css">
    <link type="text/css" rel="stylesheet" href="css/index.css">
    <script  type="text/javascript" src="js/yemian1.js"></script>
</head>

<body>
    <!-- 外部容器 -->
    <div class="wrap">
        <!-- 遮罩层 -->
        <div class="mask">
            <div class="maskTop"></div>
            <div class="maskBottom"> </div>
            <div class="maskLine"></div>
        </div>
        <!-- 头部 -->
        <header id="header">
            <div class="headerMain">
                <h1 class="logo">
                    <a href="javascript:;"><img src="img/2.jpg"></a>
                </h1>
                <nav class="nav">
                    <ul>
                        <li id="spe">
                            <a href="javascript:;">
                                <div class="up"><img src="img/2.jpg" /></div>
                                <div class="down"><img src="img/2.jpg" /></div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <div class="up blu">Course</div>
                                <div class="down bla">Course</div>

                            </a>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <div class="up blu">Works</div>
                                <div class="down bla">Works</div>

                            </a>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <div class="up blu">About</div>
                                <div class="down bla">About</div>

                            </a>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <div class="up blu">Team</div>
                                <div class="down bla">Team</div>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="arrow"></div>
        </header>
        <!-- 内容 -->
        <section class="content" id="content">
            <ul class="menuBar">
                <li class="active"> </li>
                <li> </li>
                <li> </li>
                <li> </li>
                <li> </li>

            </ul>
<ul class="list">
    <li>
        <div   class="home">
            <ul class="homeList">
                <li class="active">
                    <div class="commonTitle">
                        one
                    </div>
                </li>
                <li>
                    <div class="commonTitle">
                        two
                    </div>
                </li>
                <li>
                    <div class="commonTitle">
                        three
                    </div>
                </li>
                <li>
                    <div class="commonTitle">
                        four
                    </div>
                </li>
            </ul>
            <ul class="homeicon">
                <li class="active"></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
    </li>
    <li>
        <div class="course"> <header class="course1">
            <h2 class="commonTitle">
                <span>EINIGE</span><br>
                <span>LNSERER</span><br>
                <span>KUNDEV</span>

            </h2>

        </header>
        <div class="course2">
            <p class="commonText">
                Ddsfjie owfjpasdf,asodmfasijfasnnfneeeeeeeeeee<br>
                efnksdnfklakdsfjoasjkvmnklmvo<br>
                dlsfjaeosijfasnjgnsadkmcsaaklsdjioe vasdijvsd vasdnnsiv as
            </p>
        </div>
    <div class="course3">
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
        <div class="item">
        <div class="itemInner">
            <div class="front"></div>
            <div class="back">今天天气真不错</div>
        </div></div>
    </div>
    </div>
    </li>
    <li>
        <div class="works">
            <header class="works1">
                <h2 class="commonTitle">
                    <span>ELNBLCK</span></br>
                    <span>ERKRNNTNIS</span></br>
                    <span>ERGEBNIS</span>
                </h2>
            </header>
            <div class="works2">
                <div class="item">
                    <img src="img/yemian1_1.jpg"/>
                    <div class="mask">
                        <span>在我的后花园</span>
                        <div class="icon">
                            
                        </div>
                    </div>
                </div>
                <div class="item">
                    <img src="img/yemian1_2.jpg"/>
                    <div class="mask">
                        <span>在我的后花园</span>
                        <div class="icon">

                        </div>
                    </div>
                </div>
                <div class="item">
                    <img src="img/yemian1_3.jpg"/>
                    <div class="mask">
                        <span>在我的后花园</span>
                        <div class="icon">

                        </div>
                    </div>
                </div>
                <div class="item" id="div_4">
                    <img src="img/yemian1_4.jpg" id='img_4'/>
                    <div class="mask" id="mask_4">
                        <span>在我的后花园</span>
                        <div class="icon">

                        </div>
                    </div>
                </div>
            </div>
            <div class="works3">
                
            </div>
        </div>
    </li>
    <li>
        <div class="about">
            <header class="about1">
                <h2 class="commonTitle">
                    <span>DIE</span><br>
                    <span>SPEZIELLE</span><br>
                    <span>VIELFAIR</span>

                </h2>

            </header>
            <div class="about2">
                <p class="commonText">
                    Ddsfjie owfjpasdf,asodmfasijfasnnfneeeeeeeeeeeefnksdnfklakdsfjoasjkvmnklmvo
                    dlsfjaeosijfasnjgnsadkmcsaaklsdjioe vasdijvsd vasdnnsiv as
                </p>
            </div>
            <div class="about3">
                <div class="item">
                    <span></span>
                    <ul data-src='img/yemian1_1.jpg'></ul>
                </div>
                <div class="item">
                    <span></span>
                    <ul data-src='img/yemian1_3.jpg'></ul>
                </div>

            </div>
            <div class="wr"></div>
        </div>
    </li>
    <li>
        <div class="team">
            <header class="team1">
                <h2 class="commonTitle">
                    <span>WIR SIND</span><br>
                    <span>VOKELAIR</span>
                </h2>
            </header>
            <div class="team2">
                <p class="commonText">
                    asuidf siudfns fiosanfosanv sdi<br>
                    fnisoifw sdifnweoifs cioanvbr   <br>
                    owe vosvpwenvois visodnoisdfopw eisodvnoweivnos
                </p>
            </div>
            <div>
                <ul class="team3">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
        </div>
    </li>
   
</ul>

        </section>
    </div>
</body>
<script type="text/javascript">
//获取元素
window.onload = function(){
var arrow = document.querySelector('#header .arrow');
var upNodes = document.querySelectorAll('#header .headerMain .nav ul li .up');
var liNodes = document.querySelectorAll('#header .headerMain .nav ul li');
var content = document.getElementById('content');
var header = document.getElementById('header');
var contentLi = document.querySelectorAll('.content .list li');
var contentList = document.querySelector('.content .list');
var now = 0;
var aboutUl = document.querySelectorAll('.content .list .about .about3>.item>ul');
var homeLi1 =document.querySelectorAll('.content .list .home .homeList>li');
var homeLi2 =document.querySelectorAll('.content .list .home .homeicon>li');
var menuBarLi = document.querySelectorAll('.content .menuBar>li');
var preIndex = 0;
var maskLine = document.querySelector('.mask .maskLine');
var maskTop = document.querySelector('.mask .maskTop');
var maskBottom = document.querySelector('.mask .maskBottom');
var mask = document.querySelector('.mask')
// var animationArr=[{
//     inAin:function(){
//         var wr = document.querySelector('.about .wr');
//         wr.style.transform = 'translate(0px,0px)'
//     },
//     outAin:function(){
//         var wr = document.querySelector('.about .wr');
//         wr.style.transform = 'translate(-200px,-200px)';
//     }
// }]
// animationArr[0]['outAin']();
// setTimeout(function(){
//     animationArr[0]['inAin']();
// },2000)
// 第一屏
function home3D(){
    // 用于存储上一次的索引
    var oldIndex = 0;
    var autoIndex = 0;
    var homeTimer = null;
    for(var i=0;i<homeLi2.length;i++){
        homeLi2[i].index=i;
        homeLi2[i].onclick=function(){
            clearInterval(homeTimer);
            //清除小圆球的active
            for(var j=0;j<homeLi2.length;j++)
            {
                homeLi2[j].className=''
            } 
            homeLi2[this.index].className='active';
            if(oldIndex < this.index){
                homeLi1[oldIndex].className='LeftHide';
                homeLi1[this.index].className='rightShow';
            }else if(oldIndex > this.index){
                
                homeLi1[this.index].className='LeftShow';
                homeLi1[oldIndex].className='rightHide';
            }
            //更新索引值
            oldIndex=this.index;
            autoIndex = this.index;
            auto();
        }
    }

    function auto(){
         homeTimer = setInterval(function(){
            autoIndex++;
            if(autoIndex==homeLi2.length){
                autoIndex=0;
            }
            homeLi1[oldIndex].className='LeftHide';
            homeLi1[autoIndex].className='rightShow';
            for(var i=0;i<homeLi2.length;i++){
                homeLi2[i].className='';
            }
            homeLi2[autoIndex].className='active';
            oldIndex=autoIndex;

        },3000)
    }
    auto();
}
// home3D();
//图片炸裂
picBoom();
function picBoom(){
    for(var i=0;i<aboutUl.length;i++){
        changeImg(aboutUl[i]);
    }
    //图片改变函数
    function changeImg(ul){
        // li的宽高都是ul的一半
        var w = ul.offsetWidth/2;
        var h = ul.offsetHeight/2;
        var imgSrc = ul.dataset.src;
        //创建li
        for(var i=0;i<4;i++){
            //生成li节点
            var liNode = document.createElement('li');
            //创建img
            var imgNode= new Image();
            liNode.style.width = w+'px';
            liNode.style.height = h+'px';
            // 加载图片
            imgNode.src = imgSrc;
            imgNode.style.top=-Math.floor(i/2)*h+'px';
            imgNode.style.left=-(i%2)*w+'px';
            ul.appendChild(liNode);
            liNode.appendChild(imgNode);
        }
        var imgNodes=ul.querySelectorAll('img');
        //绑定移入移出事件
        ul.onmouseenter=function(){
            imgNodes[0].style.top=h+'px';
            imgNodes[1].style.left=-2*w+'px';
            imgNodes[2].style.left=w+'px';
            imgNodes[3].style.top=-2*h+'px';
        }
        ul.onmouseleave=function(){
            imgNodes[0].style.top=0+'px';
            imgNodes[1].style.left=-w+'px';
            imgNodes[2].style.left=0+'px';
            imgNodes[3].style.top=-h+'px';

        }
    }
}
//滚轮降频定时器
var timer=null;
// 滚轮
// window.onwheel=fun;
document.onwheel=function(event){
    //滑动的回调 执行10次
    clearTimeout(timer);
    timer = setTimeout(function(){
        fun(event);
    },200)
};
if(document.addEventListener){
    document.addEventListener('DOMMouseSroll',function(event){
        clearTimeout(timer);
        timer = setTimeout(function(){
            fun(event)
        },200)
    })
}
function fun(event){
event = event || window.event;
var flag = '';
if(event.wheelDelta){
    if(event.wheelDelta>0){
        flag='up';
    }else{
        flag='down';
    }
}else if(event.detail){
if(event.detail<0){
    flag='up';
}else{
    flag='down';
}
}
switch (flag){
    case 'up':
        if(now>0){
            now--;    
        }
   
    move(now);
    break;//执行向上 逻辑
    case 'down':
        if(now<liNodes.length-1){
            now++;
        }
        
    move(now);
    break;
}
event.preventDefault && event.preventDefault();
return false;
// console.log(event);
// console.log(event.wheelDelta);
// var e = event || window.event;
// if(event.wheelDelta)
};
move(0);
function move(now){
    for(var i = 0; i < contentLi.length;i++){
        contentLi[i].style.height = document.documentElement.clientHeight -  header.offsetHeight+'px';
    }
    for(var i = 0;i<upNodes.length;i++){
        upNodes[i].style.width='';
    };
    
    upNodes[now].style.width ='100%';
    arrow.style.left = liNodes[now].getBoundingClientRect().left+liNodes[now].offsetWidth/2-arrow.offsetWidth/2+'px';
    contentList.style.top =  -now*(document.documentElement.clientHeight-header.offsetHeight)+'px';
    for(var i=0;i<menuBarLi.length;i++){
        menuBarLi[i].className='';
    }
    menuBarLi[now].className='active';
    // animationArr[now]['inAin']();
    

}
function contentBind(){
    content.style.height = document.documentElement.clientHeight-
    header.offsetHeight + 'px';
   
    }
function headerBind(){
    // 第一个up的宽度
upNodes[0].style.width='100%';
// console.log(arrow.clientLeft);
// 初始化小三角位置
arrow.style.left = liNodes[0].getBoundingClientRect().left + 
liNodes[0].offsetWidth/2 - arrow.offsetWidth/2+'px';
for(var i=0;i<liNodes.length;i++){
    //li设置绑定单击事件
    liNodes[i].index = i;
    liNodes[i].onclick = function () {
        for(var j=0;j<upNodes.length;j++){
             upNodes[j].style.width='';

        }
        upNodes[this.index].style.width='100%';
        arrow.style.left = liNodes[this.index].getBoundingClientRect().left + 
liNodes[this.index].offsetWidth/2 - arrow.offsetWidth/2+'px';
now = this.index;
move(now);}}
    // 侧导航
    for(var i=0;i<menuBarLi.length;i++){
        menuBarLi[i].index = i;
        menuBarLi[i].onclick = function()
        {
            // 点击侧导航
            now = this.index;
            move(now);

        }
    }
  


}
headerBind();
contentBind();
function loading(){
    var imgFlag=0;
    var arr = ['2.jpg','yemian1_1.jpg'];
    for(var i=0;i<arr.length;i++){
    var imgNode = new Image();
    imgNode.src='img/'+arr[i];
    imgNode.onload=function(){
        imgFlag++;
        maskLine.style.width=imgFlag/arr.length*100+'%';
    }
    }
    //transitionend监听过渡执行完成 根据过渡样式个数（宽高）来执行次数
    maskLine.addEventListener('transitionend',function(){
        maskTop.style.height='0'
        maskBottom.style.height='0'
        maskLine.style.display='none'
    })
    maskTop.addEventListener('transitionend',function(){
        home3D();
        mask.remove();//开机动画移除    并且弄出动画效果
    })
}
window.onresize = function(){//视口变化就变换样式
    //重新计算内容区域高度
    contentBind();
    arrow.style.left=liNodes[now].getBoundingClientRect().left+liNodes[now].offsetWidth/2-arrow.offsetWidth/2+'px';
}
loading();
//取消浏览器默认行为
event.preventDefault && event.preventDefault();
return false;
}



</script>

</html>